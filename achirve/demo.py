# 初期のガントチャートと更新後のガントチャートのデータ
# Machine2のジョブ1の終了時刻が372 → 422に遅延しているガントチャートを取得
# fmt: off
init_gantt = [
    [[0, 76, 8], [76, 113, 6], [113, 199, 7], [199, 242, 1], [242, 248, 4], [248, 277, 0], [282, 353, 3], [353, 438, 2], [438, 451, 9],[541, 588, 5],],
    [[0, 46, 6], [46, 127, 3], [127, 129, 5], [129, 198, 8], [199, 245, 7], [245, 336, 2], [336, 421, 9], [421, 443, 4], [443, 521, 0], [635, 663, 1],],
    [[0, 31, 7], [31, 115, 5], [115, 129, 4], [174, 187, 6], [187, 282, 3], [282, 372, 1], [372, 457, 8], [457, 518, 9], [521, 530, 0], [530, 604, 2],],
    [[113, 174, 6], [198, 274, 8], [274, 369, 5], [438, 477, 2], [504, 530, 4], [530, 566, 0], [566, 635, 1], [692, 790, 3], [794, 846, 9], [846, 925, 7],],
    [[319, 351, 7], [372, 447, 1], [447, 546, 3], [546, 615, 4], [615, 664, 0], [664, 690, 8], [690, 696, 5], [696, 751, 6], [846, 936, 9], [950, 983, 2],],
    [[129, 181, 5], [219, 240, 6], [245, 319, 7], [319, 370, 8], [443, 504, 4], [664, 675, 0], [747, 794, 9], [794, 804, 2], [804, 850, 1], [850, 893, 3],],
    [[187, 219, 6], [351, 439, 7], [469, 509, 8], [518, 525, 9], [546, 555, 3], [588, 653, 5], [675, 737, 0], [737, 783, 1], [816, 905, 2], [905, 958, 4],],
    [[361, 391, 6], [509, 598, 8], [607, 692, 3], [692, 741, 4], [741, 777, 7], [777, 802, 5], [804, 816, 2], [816, 872, 0], [872, 944, 1], [944, 989, 9],],
    [[272, 361, 6], [369, 417, 5], [439, 458, 7], [555, 607, 3], [607, 671, 9], [671, 692, 4], [692, 782, 2], [782, 856, 8], [872, 916, 0], [944, 974, 1],],
    [[240, 272, 6], [447, 458, 1], [458, 469, 8], [469, 541, 5], [541, 589, 7], [671, 747, 9], [747, 819, 4], [819, 841, 3], [905, 950, 2], [950, 971, 0],],
]

gantt = [
    [[0, 76, 8], [76, 113, 6], [113, 199, 7], [199, 242, 1], [242, 248, 4], [248, 277, 0], [282, 353, 3], [353, 438, 2], [438, 451, 9],[541, 588, 5],],
    [[0, 46, 6], [46, 127, 3], [127, 129, 5], [129, 198, 8], [199, 245, 7], [245, 336, 2], [336, 421, 9], [421, 443, 4], [443, 521, 0], [635, 663, 1],],
    [[0, 31, 7], [31, 115, 5], [115, 129, 4], [174, 187, 6], [187, 282, 3], [282, 372, 1], [372, 457, 8], [457, 518, 9], [521, 530, 0], [530, 604, 2],],
    [[113, 174, 6], [198, 274, 8], [274, 369, 5], [438, 477, 2], [504, 530, 4], [530, 566, 0], [566, 635, 1], [692, 790, 3], [794, 846, 9], [846, 925, 7],],
    [[319, 351, 7], [372, 447, 1], [447, 546, 3], [546, 615, 4], [615, 664, 0], [664, 690, 8], [690, 696, 5], [696, 751, 6], [846, 936, 9], [950, 983, 2],],
    [[129, 181, 5], [219, 240, 6], [245, 319, 7], [319, 370, 8], [443, 504, 4], [664, 675, 0], [747, 794, 9], [794, 804, 2], [804, 850, 1], [850, 893, 3],],
    [[187, 219, 6], [351, 439, 7], [469, 509, 8], [518, 525, 9], [546, 555, 3], [588, 653, 5], [675, 737, 0], [737, 783, 1], [816, 905, 2], [905, 958, 4],],
    [[361, 391, 6], [509, 598, 8], [607, 692, 3], [692, 741, 4], [741, 777, 7], [777, 802, 5], [804, 816, 2], [816, 872, 0], [872, 944, 1], [944, 989, 9],],
    [[272, 361, 6], [369, 417, 5], [439, 458, 7], [555, 607, 3], [607, 671, 9], [671, 692, 4], [692, 782, 2], [782, 856, 8], [872, 916, 0], [944, 974, 1],],
    [[240, 272, 6], [447, 458, 1], [458, 469, 8], [469, 541, 5], [541, 589, 7], [671, 747, 9], [747, 819, 4], [819, 841, 3], [905, 950, 2], [950, 971, 0],],
]


# gantt = [
#     [[0, 76, 8], [76, 113, 6], [113, 199, 7], [199, 242, 1], [242, 248, 4], [248, 277, 0], [282, 353, 3], [353, 438, 2], [438, 451, 9], [495, 542, 5],],
#     [[0, 46, 6], [46, 127, 3], [127, 129, 5], [129, 198, 8], [199, 245, 7], [245, 336, 2], [336, 421, 9], [421, 443, 4], [443, 521, 0], [683, 711, 1],],
#     [[0, 31, 7], [31, 115, 5], [115, 129, 4], [174, 187, 6], [187, 282, 3], [282, 422, 1], [423, 508, 8], [508, 569, 9], [569, 578, 0], [578, 652, 2],],
#     [[113, 174, 6], [198, 274, 8], [274, 369, 5], [438, 477, 2], [504, 530, 4], [578, 614, 0], [614, 683, 1], [743, 841, 3], [845, 897, 9], [897, 976, 7],],
#     [[319, 351, 7], [423, 498, 1], [498, 597, 3], [597, 666, 4], [666, 715, 0], [715, 741, 8], [741, 747, 5], [747, 802, 6], [897, 987, 9], [1001, 1034, 2],],
#     [[129, 181, 5], [219, 240, 6], [245, 319, 7], [319, 370, 8], [443, 504, 4], [715, 726, 0], [798, 845, 9], [845, 855, 2], [855, 901, 1], [901, 944, 3],],
#     [[187, 219, 6], [351, 439, 7], [520, 560, 8], [569, 576, 9], [597, 606, 3], [606, 671, 5], [726, 788, 0], [788, 834, 1], [867, 956, 2], [956, 1009, 4],],
#     [[361, 391, 6], [560, 649, 8], [658, 743, 3], [743, 792, 4], [792, 828, 7], [828, 853, 5], [855, 867, 2], [867, 923, 0], [923, 995, 1], [995, 1040, 9],],
#     [[272, 361, 6], [369, 417, 5], [439, 458, 7], [606, 658, 3], [658, 722, 9], [722, 743, 4], [743, 833, 2], [833, 907, 8], [923, 967, 0], [995, 1025, 1],],
#     [[240, 272, 6], [423, 495, 5], [498, 509, 1], [509, 520, 8], [520, 568, 7], [722, 798, 9], [798, 870, 4], [870, 892, 3], [956, 1001, 2], [1001, 1022, 0],],
# ]

# fmt: on
# 初期のガントチャートと更新後のガントチャートの開始時刻の差を計算する
diff_gantt = []
starting_time_diviation_sum = 0
stability_function = 0
reschedule_time = 423
for machine in range(len(gantt)):
    machine_diff = []
    for operation in range(len(gantt[machine])):
        initial_start = init_gantt[machine][operation][0]
        updated_start = gantt[machine][operation][0]
        job_number = gantt[machine][operation][2]
        time_diff = initial_start - updated_start
        if initial_start >= reschedule_time:
            stability_function += abs(time_diff) * (
                10 / (initial_start - reschedule_time) ** (1 / 2)
            )
            starting_time_diviation_sum += abs(time_diff)
        machine_diff.append([time_diff, initial_start, job_number])
    diff_gantt.append(machine_diff)

# print(diff_gantt)
# print(stability_function)
print(starting_time_diviation_sum)
